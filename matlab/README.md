# Matlab
## Raw signal visualization

We record the signal together with any noise using Android application. By performing FFT on it, we obtain the frequency spectrum at each sample time. Two possible spectrum samples are as follows, or you may check it out at file "data_out_\<timestamp>".


	1353289963727 1.7268692397206977E-5 3.40598171537711E-5 2.254997964037299E-5 2.0854948728152626E-5 3.300229366267494E-5 6.326572699771412E-5 1.2436918547812235E-5 3.350823295956103E-5 4.020402413819372E-5 6.299865255663314E-5 2.152487099664023E-5 5.285634669651192E-6 1.3745012838223199E-5 1.4428334578815538E-5 2.105064873927161E-7 3.159488937974479E-5 3.8095385899325116E-5 4.1762558152431084E-5 1.1118748369948433E-5 3.8353103551673153E-5 5.479334695924488E-5 4.176311256310512E-5 2.9524071663660206E-6 2.895499552961734E-5 5.125073262818996E-6 7.535715321729409E-6 5.964537864946408E-6 2.9450747630001403E-5 5.45665499869927E-5 3.28712707431834E-5 2.336716889324159E-5 2.272161967981686E-5 5.290108855966064E-5 4.4999075279662543E-7 2.0184011763258602E-5 1.3104234338733384E-5 9.150353006672564E-7 4.320968237037395E-5 7.753262895962187E-6 4.7341975035501875E-5 4.410796918380132E-5 4.9545834654054436E-5 1.768253707327249E-5 3.7092381397147375E-5 5.0350017866390575E-5 2.6393338252073015E-5 6.01382846217381E-6 3.23199024102283E-8 3.738217241189741E-5 2.28248034847469E-6 2.0713666344914037E-5 1.2484475711641345E-5 1.280974462294923E-5 3.458648718237113E-5 3.307859898045944E-6 4.0953985952328365E-6 2.4294095147718217E-5 5.85381820034733E-5 3.484095422995895E-5 1.1588503705801378E-5 5.4931640625E-4 1.95092467883194E-4 0.0016643107597573733 0.002349853515625 0.001922607421875 0.0012862528607215681 7.058616376391169E-4 8.544921875E-4 0.00164794921875 0.002309656835603537 0.001064132220370515 0.001556396484375 0.00323486328125 0.0010580640222240284 0.003694252037999713 0.0 0.0 0.002537845674101077 4.0629395526831514E-4 0.002105712890625 5.79833984375E-4 0.0025770016366505858 0.04311061906745249 0.032995479955378326 0.0031747543153805013 0.0015337850920027762 0.005046601183954213 0.0055280645899572715 0.02265955350709601 0.009689913709723257 0.01662767920226735 0.009064042774882765 0.02132027864444199 0.01774862465260802 0.014426997442014991 0.0033756179870984906 0.008798843429136453 0.005515748926179955 0.03185299876497313 0.03661548996007802 0.025460706586650256 0.03391778344039026 0.005830683958665416 0.013682353815584544 0.009548539257352821 0.007739809561874137 0.004518204966739606 0.003504736241674685 1.2690124889398573E-4 0.008262646183750558 0.00551346842729376 0.011551280661120425 0.001137571767755508 0.005333822194805231 0.0024003218895368925 0.006625250947948786 3.145195354720522E-4 0.004217470882965536 0.004520997971515655 7.461130677686618E-4 2.518445210476228E-4 0.0029814461435504463 0.00233056173375752 0.002363067553024555 6.746227220013994E-4 0.004599408997662909 0.003034511763881165 0.007548728351234199 0.004211295866411782 0.0027383895628080666 ;
	
	1353289963802 0.02822373256207702 0.01315344990576901 0.03421745825967758 0.0025883929895457423 0.03801005272344302 0.002192651048632711 0.02166840643691563 0.02821593135965633 0.02437093655671478 0.03604453271290608 0.04541007578486696 0.06049491351108545 0.06388297659887238 0.0667108087786317 0.16497030540010915 0.08925512824778127 0.23957706268770337 0.23030544117226998 0.09434052600702887 0.14604466735389235 0.054180908393955785 0.05576256491365319 0.026897711798456403 0.06162958184590129 0.016422746136759817 0.012280515911890243 0.024869182068052435 0.002338794847321024 0.05649551050250409 0.0903929175473403 0.07816131398731743 0.12227715933099623 0.007230375271002813 0.057278786845074106 0.046527868681160184 0.014754542398161388 3.694861062416427E-4 0.051613229836814295 0.052416136606487876 0.12106693550332716 0.03113024440176657 0.12907357259815586 0.04436569947751065 0.07211050516783843 0.07846524466776601 0.032856156737490615 0.04605795580390487 0.06188925246911451 0.009149150542054858 0.1167788792979728 0.05079272963765853 0.07773136226954325 0.14158430570005237 0.03164474005284586 0.13108709551479164 0.05024635121008989 0.04265642278832413 0.004730153306056058 0.019096218203115974 0.007111347850157539 0.02973063350292719 0.01604728287166091 0.035743876607994655 0.004572956730836852 0.05940520606354044 0.031631251315619335 0.0430450044744914 0.017737884030659713 0.00494833044206276 0.008553757445665989 0.01434447943531316 3.1775499627368297E-4 0.02324378969011568 0.0039285358452089995 0.01027390421417693 0.02477371189594526 0.017558300118351966 0.027639653489362495 0.04775445061976902 0.006728797133886902 0.071210577861506 0.0490448423037012 0.04311061906745249 0.032995479955378326 0.0031747543153805013 0.0015337850920027762 0.005046601183954213 0.0055280645899572715 0.02265955350709601 0.009689913709723257 0.01662767920226735 0.009064042774882765 0.02132027864444199 0.01774862465260802 0.014426997442014991 0.0033756179870984906 0.008798843429136453 0.005515748926179955 0.03185299876497313 0.03661548996007802 0.025460706586650256 0.03391778344039026 0.005830683958665416 0.029322190318839668 0.020314570943225606 0.016941465455711124 0.0156233392866581 0.029634899055411553 0.018567062018901417 0.05500477616516466 0.003433926300676793 0.028341544428218273 0.0011180704742745733 0.009561928153432347 0.02442587648528429 0.01820910726161376 0.020980391120363713 0.045695824104208436 0.04913170046657372 0.020298714716830552 0.016541719356471557 0.029829534927848934 0.023634440161797887 0.012305360396397583 0.004667504558681184 0.03197866250952565 0.011028703531720044 0.02114287727376528 0.006768705052038301 0.009797478842509387 ;


We can add the following line of code so that Matlab can easily parse the data, return the variable.

	data = [
	// recorded data as above;
	];

To plot nicely in matlab, do
	
	surf(1:(size(data, 2)-1), 1:size(data, 1), data(:, 2:end));shading interp
So you will get the figure below.
![Illustration of Signals](https://raw.github.com/nebgnahz/MaraudersMap/master/matlab/Ultrasound_3d.png)

## Basic data analysis

Based on the observation that noises are either flat in frequency domain or short duration in time domain. We may filter out our signal and obtain the room id.

A possible approach is in **UltrasoundAnalyze.m** file, but improvements are necessary.


